# 테스트란?
- 인수 테스트
- 자동 테스트
## 자동 테스트
- given
- when
- then

# TDD - Test Driven Development
- 테스트 주도 개발
1. RED 실패하는 테스트를 작성한다.
2. GREEN 테스트를 성공하는 최소한의 코드를 작성한다.
3. BLUE 리팩토링한다.
4. 1~3의 과정을 반복한다.

## TDD의 장단점
### 장점
1. 실패하는 테스트를 작성해야 하기 때문에, 인터페이스를 먼저 만드는 것이 강제된다.
    - 인터페이스는 역할(행동)을 의미 -> 객체 지향의 핵심 원리 중 하나
    - 객체 지향을 지킬 수 있도록 도울 수 있다.
2. 장기적인 관점에서 개발 비용 감소
image
- But 개발 초기에는 TDD가 더 오래 걸리고 비용이 들어갈 수 있다.
### 단점
1. 난이도가 높다.
2. 인터페이스를 만드는 것이 강제되지만, 인터페이스의 메소드가 먼저 만들어지는 것뿐 '행동'자체가 만들어지는 것은 아니다.
3. 충분히 느려지고 쉽게 깨질 수 있는 테스트

# Test의 필요성
1. 레거시 코드
    - 테스트가 있으면 레거시 코드를 수정할 때 더 안정적으로 수정할 수 있다.
2. Regression
    - 코드의 수정이 있을 시 코드 수정과 배포를 두렵게 만들 수 있다.
    - 테스트를 만들면 수정을 할 때마다 테스트로 검증할 수 있다.
3. SOLID와 Test의 깊은 상관관계
    - SOLID 좋은 설계를 도울 수 있음
    - TEST 회귀 버그 방지

# 테스트의 3 분류
- E2E (5%)
    - API 테스트 
    - large(대형) 테스트
```
멀티 서버
End to end 테스트
```
- INTEGRATION (15%)
    - 통합테스트 
    - medium(중형) 테스트
```
단일 서버
단일 서버
멀티 프로세스
멀티 스레드
h2같은 테스트 DB 사용가능
```    
- UNIT (80%)
    - 단위 테스트 
    - small(소형) 테스트
```
단일 서버
단일 프로세스
단일 스레드
디스크 I/O 사용 X
Blocking call X
```

# 테스트에 필요한 개념
- SUT

    System Under Test (테스트 하려는 대상)

- DBB

    Behavior driven development 
    
    given - when - then

    Arrange - Act - Assert
- Interaction Test (상호 작용 테스트)

    대상 함수의 구현을 호출하지 않으면서 그 함수가 어떻게 호출되는지를 검증하는 기법

    상호 작용 테스트보다는 상태를 테스트하는게 좋다.

- 상태 검증
image

- 행위 검증
image

- 테스트 픽스처

    테스트에 필요한 자원을 생성하는 것

- Testability

    테스트 가능성

    테스트가 가능한 소프트웨어 구조인가?

- test double

    테스트 대역

    - dummy : 아무런 동작도 하지 않고, 그저 코드가 정상적으로 돌아가기 위해 전달하는 객체
    - fake : Local 또는 테스트에서 사용하기 위해 만들어진 가짜 객체, 자체적인 로직이 있다.
    - stub : 미리 준비된 값을 출력하는 객체 (mockito 프레임워크)
    - mock : 메서드 호출을 확인하기 위한 객체, 자가 검증 능력이 있음, 사실상 double과 동일한 의미
    - spy : 메서드 호출을 모두 기억해뒀다가 나중에 확인&검증하기 위한 객체